server {
    listen 80;
    server_name _;

    # Przekierowanie wszystkich endpointów do backendu:
    # /timetables, /lessons, /demo-data, /timeslots, /rooms, /profile
    # wraz z ewentualnymi dalszymi segmentami w ścieżce.
    # Można to zrobić kilkoma location albo jednym wyrażeniem location ~ ...
    
    # (A) Pojedynczy blok z wyrażeniem regularnym dla wszystkich endpointów:
    location ~ ^/(timetables|lessons|demo-data|timeslots|rooms|profile) {
        proxy_pass http://backend:8081;
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # (B) Reszta ścieżek -> frontend (SvelteKit)
    location / {
        proxy_pass http://frontend:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
